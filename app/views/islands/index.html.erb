<%# <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Asperiores doloremque facere quam, ex quasi perferendis iste commodi et voluptatibus. Id tenetur aspernatur modi dolor quis, corporis asperiores distinctio illum quibusdam?</p>
<p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Asperiores doloremque facere quam, ex quasi perferendis iste commodi et voluptatibus. Id tenetur aspernatur modi dolor quis, corporis asperiores distinctio illum quibusdam?</p>
<p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Asperiores doloremque facere quam, ex quasi perferendis iste commodi et voluptatibus. Id tenetur aspernatur modi dolor quis, corporis asperiores distinctio illum quibusdam?</p>
<p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Asperiores doloremque facere quam, ex quasi perferendis iste commodi et voluptatibus. Id tenetur aspernatur modi dolor quis, corporis asperiores distinctio illum quibusdam?</p>
<p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Asperiores doloremque facere quam, ex quasi perferendis iste commodi et voluptatibus. Id tenetur aspernatur modi dolor quis, corporis asperiores distinctio illum quibusdam?</p> %>
<style>
i {
  color: black;
}

.the-map {
  position: sticky;
  top: 0;
}
</style>

<div class="container">
<h1><a href ="/" class="island-hub" id="large">The Island Hub</a></h1>
<h3 id="index-header">Your private island holiday starts here</h2>

<div class="container mt-4">
  <%= render 'islands/category_banner' %>
</div>

<div class="map-card-container my-5">

  <div class="card-container">

      <% carousel = 0 %>
    <% @islands.each do |island| %>
      <a href="islands/<%=island.id%>" class='card'>
      <div id="island-card-carousel-<%=carousel_id = carousel += 1 %>" class="carousel slide" data-ride="carousel"  data-interval="false">

        <div class="carousel-inner islands">
        <% if island.photos.length >= 3 %>
          <div class="carousel-item island active">
              <img src="<%= cl_image_path island.photos[0].key %>" class="d-block" alt="island-1">
          </div>
          <div class="carousel-item island">
            <img src="<%= cl_image_path island.photos[1].key %>" class="d-block" alt="island-2">
          </div>
          <div class="carousel-item island">
            <img src="<%= cl_image_path island.photos[2].key %>" class="d-block" alt="island-3">
          </div>
        <% else %>
          <div class="carousel-item island active">
                <img src="<%= image_path "island_demo1"%>" class="d-block" alt="island-1">
            </div>
            <div class="carousel-item island">
              <img src="<%= image_path "island_demo2"%>" class="d-block" alt="island-2">
            </div>
            <div class="carousel-item island">
              <img src="<%= image_path "island_demo3"%>" class="d-block" alt="island-3">
            </div>
        <% end %>

          <div class="carousel-control-prev" href="#island-card-carousel-<%= carousel_id %>" role="button"  data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
            </div>

          <div class="carousel-control-next" href="#island-card-carousel-<%= carousel_id%>" role="button"  data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
          </div>

        </div>
      </div>

      <div class="container pt-3">
        <h3><b><%= island.name %></b></h3>
        <h4><%= island.location %></h4>
        <p>Â£<%= island.price.to_i %> p/n</p>
      </div>
      </a>
    <% end %>

  </div>
  <div class='the-map'
    data-controller="map"
    data-map-markers-value="<%= @markers.to_json %>"
    data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
  </div>

</div>
</div>
